import{j as ne,u as ie,k as V,l as de,m as ue,C as pe,p as ce,q as me,r as N,d as j,e as b,o,g as c,c as l,h as x,t as r,a as t,F as w,b as p,s as m,n as q,i as U,W as H}from"./app-PFKfXWEI.js";import{S as he,_ as ge}from"./SelectVariantModal-AXoQwOD6.js";import{t as fe}from"./throttle-DnWO0zlu.js";import{$ as ye}from"./helpers-ugK6HtQT.js";import{D as W}from"./Dialog-CBfXGxNq.js";import{C as ve}from"./CheckBox-BZhUf8Cz.js";import{T as k}from"./TextInput-CNd7BHfN.js";import{S as z}from"./SelectInput-Bl7BPvb9.js";import{A as be}from"./AdminLayout-CAkQ7Os4.js";import{A as P}from"./AutoComplete-D56ZVB9O.js";import{L as we}from"./LoadingButton-DuL9lXrz.js";import{T as _e}from"./TextareaInput-BgV4fn6d.js";import{T as ke}from"./FormSection-DOK5FbWO.js";import{T as $e}from"./TrashedMessage-CoPSjYpa.js";import{T as Ve}from"./ActionMessage-Disc29dP.js";import"./_baseIsEqual-DTBiz6Tr.js";import"./Modal-c7b3PsDt.js";import"./DialogModal-DGhkFqan.js";import"./DangerButton-BRiD1LeJ.js";import"./SecondaryButton-DNoVYIkM.js";import"./Checkbox-DOKYhsNo.js";import"./InputError-S5X7Xksv.js";import"./v4-C6aID195.js";import"./Label-C2KmBUfM.js";import"./Input-CjMYJgEv.js";import"./DropdownLink-C4dPXnWr.js";import"./ApplicationLogo-C_9BxMDe.js";import"./ApplicationMark-CKHzDXqr.js";import"./SectionTitle-B7yJArs8.js";const xe={key:0,class:"flex items-center"},qe={class:"flex flex-col gap-6"},Ue={class:"flex flex-col lg:flex-row gap-6"},je={class:"flex flex-col gap-6 w-full lg:w-1/2"},Ae={class:"flex flex-col gap-6 w-full lg:w-1/2"},Se={class:"p-4 md:px-6 bg-gray-50 -mx-4 md:-mx-6"},Te={key:0,class:"pt-4"},Ce={key:0,class:"text-red-600"},De={key:1},ze=["innerHTML"],Fe={class:"w-full block sm:flex items-center justify-stretch gap-4"},Le={class:"mt-4 grow flex items-center gap-4"},Me={class:"w-1/2"},Ie=["value"],We=["value"],Pe={key:1,class:"w-full block sm:flex items-center justify-stretch gap-4"},Be={class:"mt-4 grow flex items-center gap-4"},Re={class:"w-1/2"},Ee=["value"],Ne=["value"],He={class:"mt-4"},Oe={key:0,class:"text-red-600 pt-1 rounded-md"},Qe={key:1,class:"text-red-600 pt-1 rounded-md"},Je={key:2,class:"text-red-600 pt-1 rounded-md"},Ye={key:1,class:"bg-white mt-4 rounded-md shadow overflow-x-auto"},Ge={class:"w-full"},Ke={class:"text-left font-bold"},Xe={class:"px-2 lg:pl-6 py-4 w-4"},Ze={class:"px-2 lg:px-6 py-4"},et={key:0},tt={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},st={class:"px-2 lg:px-6 py-4 text-center w-32 xl:w-56"},ot={key:0,class:"group"},lt={class:"border-t",colspan:"4"},rt={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},at={class:"w-full lg:w-auto font-bold"},nt={class:"text-base"},it={class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"},dt=["onClick"],ut={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},pt=["innerHTML"],ct={key:0,class:"px-2 xl:px-6 pb-2 text-right"},mt={class:"px-2 xl:px-6 pb-2 text-right"},ht={key:0,class:"px-2 xl:px-6 pb-2 text-right"},gt=["value"],ft=["value"],yt={colspan:"4"},vt={class:"px-2 lg:px-6 pb-2 focus:text-indigo-500"},bt={key:0,class:"text-red-600 pt-1 rounded-md"},wt={key:1,class:"text-red-600 pt-1 rounded-md"},_t={key:2,class:"text-red-600 pt-1 rounded-md"},kt={key:1},$t={class:"border-t"},Vt={class:"px-2 lg:pl-6 py-2 focus:text-indigo-500"},xt=["onClick"],qt={class:"border-t"},Ut={class:"px-2 lg:px-6 py-2 focus:text-indigo-500"},jt={class:"w-full lg:w-auto"},At={class:"text-base"},St={key:0,class:"text-red-600 pt-1 rounded-md"},Tt={key:1,class:"text-red-600 pt-1 rounded-md"},Ct={key:2,class:"text-red-600 pt-1 rounded-md"},Dt={class:"border-t"},zt={key:0,class:"px-2 xl:px-6 py-2 text-right"},Ft={class:"border-t"},Lt={class:"px-2 xl:px-6 py-2 text-right"},Mt={class:"border-t"},It={key:0,class:"px-2 xl:px-6 py-2 text-right"},Wt=["value"],Pt=["value"],Bt={key:1},Rt={key:0,class:"text-red-600"},Et={for:"file-upload",class:"font-medium text-gray-700"},Nt={key:0,class:"print:hidden py-4 w-full"},Ht={role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},Ot={class:"w-0 flex-1 flex items-center"},Qt={class:"ml-2 flex-1 w-0 truncate"},Jt={class:"ml-4 flex-shrink-0 flex items-center gap-4"},Yt=["href"],Gt=["onClick"],Kt={class:"space-y-1 text-center"},Xt={class:"flex items-center justify-center text-gray-600"},Zt={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-gray-300"},es={key:0,class:"font-semibold"},ts={key:1,class:"font-semibold"},ss={class:"pl-1"},os={class:"text-sm text-gray-700"},ls={key:0,class:"inline-block pt-4"},rs={class:"px-3 py-1 rounded-md border font-bold text-base"},as={key:1,class:"mt-4 pt-2 text-red-600 rounded-md"},ns={class:"w-full flex items-center justify-between"},is={key:1},ds={class:"flex items-center"},Ws={__name:"Form",props:{edit:Object,contacts:Array,warehouses:Array},setup(g){const y=ne(),{t:O}=ie(),h=g,T=V([]),F=V(null),L=V(!1);V(!1);const M=V(!1),C=V(!1),f=V(null),A=V(!1),D=V(null),B=V(window.innerWidth),Q=de(()=>B.value<1024);ue(A,e=>{D.value=null,document.body.style.overflow=e?"hidden":"auto"});const u=pe({_method:h.edit?"PUT":"POST",attachments:null,type:h.edit?h.edit.type:"Damage",details:h.edit?h.edit.details:null,draft:h.edit?h.edit.draft==1:!1,reference:h.edit?h.edit.reference:null,warehouse_id:h.edit?h.edit.warehouse_id:null,date:h.edit?h.edit.date:ye(new Date),items:h.edit&&h.edit.items&&h.edit.items.length?h.edit.items.map(e=>({...e.item,id:e.id,details:"",item_id:e.item_id,unit_id:e.unit_id,weight:parseFloat(e.weight),quantity:parseFloat(e.quantity),old_quantity:parseFloat(e.quantity),selected:{serials:[],variations:e.variations.map(d=>({...d,weight:parseFloat(d.pivot.weight),unit_id:d.pivot.unit_id||e.unit_id,quantity:parseFloat(d.pivot.quantity),old_quantity:parseFloat(d.pivot.quantity)}))}})):[]});ce(()=>{var e;!h.edit&&!((e=y.props.auth.user)!=null&&e.roles.find(a=>a.name=="Super Admin"))&&(u.warehouse_id=y.props.auth.user.warehouse_id),window.addEventListener("resize",R)}),me(()=>{window.removeEventListener("resize",R)});const R=fe(()=>B.value=window.innerWidth,250),E=(e,a,d)=>{d?(e.selected.variations.splice(d,1),e.selected.variations.length<1&&(e.selected.variations=[],u.items.splice(a,1))):u.items.splice(a,1)},J=e=>{let a=null;if(typeof e=="object"&&e!==null?a=f.value.variations.find(d=>ge(d.meta,e)):a=f.value.variations.find(d=>d.sku==e),console.log(f.value),a){console.log(f.value),f.value.selected||(f.value.selected={variations:[],serials:[]}),a.quantity=1,a.unit_id=f.value.unit_id,a.weight=y.props.settings.track_weight==1&&f.value.track_weight==1?1:0;let d=u.items.find(v=>v.item_id==f.value.id);if(d){d.quantity+=1,d.weight+=y.props.settings.track_weight==1&&d.track_weight==1?1:0;let v=d.selected.variations.length?d.selected.variations.find(S=>S.id==a.id):null;v?(v.quantity+=1,v.weight+=y.props.settings.track_weight==1&&d.track_weight==1?1:0):d.selected.variations.push(a)}else f.value.selected.variations=[{...a}],u.items.push({...f.value,quantity:1,unit_id:f.value.unit_id,weight:y.props.settings.track_weight==1&&f.value.track_weight==1?1:0});f.value=null,A.value=!1}else D.value=O("No match found for the item variation."),y.props.flash.error=D.value},Y=e=>{if(e.item_id=e.id,e.selected=e.selected||{variations:[],serials:[]},e.has_variants&&e.variants.length>0)f.value={...e,variants:e.variants.map(a=>({...a,selected:null}))},A.value=!0;else{let a=u.items.find(d=>d.id==e.id);a?(a.quantity+=1,a.weight+=y.props.settings.track_weight==1&&a.track_weight==1?1:0):u.items.push({...e,quantity:1,unit_id:e.unit_id,weight:e.track_weight==1?1:0})}},G=e=>{Array.from(e.target.files).forEach(a=>T.value.push(a.name))};function K(){F.value&&(u.attachments=F.value.files),u.transform(e=>({...e,items:e.items.map(a=>({...a,unit:null,variants:null,variations:null,unit_id:a.unit_id||null,selected:{serials:a.selected.serials&&a.selected.serials.length?a.selected.serials.map(d=>d.id):[],variations:a.selected.variations.map(d=>{let v={};return v[d.id]={weight:d.weight,variation_id:d.id,quantity:d.quantity,unit_id:d.unit_id||null,old_quantity:d.old_quantity}})}}))})).post(h.edit?route("adjustments.update",h.edit.id):route("adjustments.store"),{preserveScroll:!0})}function X(){L.value=!0}function Z(){u.delete(route("adjustments.destroy",h.edit.id),{onSuccess:()=>I()})}function I(){L.value=!1}function ee(){C.value=!0}function te(){H.put(route("adjustments.restore",h.edit.id),{onSuccess:()=>C.value=!1})}function se(){C.value=!1}function oe(){M.value=!0}function le(){u.delete(route("adjustments.destroy.permanently",h.edit.id),{onSuccess:()=>I()})}function re(){M.value=!1}function ae(e){H.delete(route("media.delete",e))}return(e,a)=>{const d=N("Link"),v=N("icons");return o(),j(be,{title:e.$t(g.edit?"edit_x":"create_x",{x:e.$t("Adjustment")})},{default:b(()=>[c(ke,{onSubmitted:K},{title:b(()=>[g.edit?(o(),l("div",xe,[c(d,{class:"text-blue-600 hover:text-blue-700",href:e.route("adjustments.index")},{default:b(()=>[x(r(e.$t("Adjustments")),1)]),_:1},8,["href"]),a[7]||(a[7]=t("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),x(" "+r(e.$t("Adjustment"))+" ("+r(g.edit.reference)+") ",1)])):(o(),l(w,{key:1},[x(r(e.$t("create_x",{x:e.$t("Adjustment")})),1)],64))]),description:b(()=>[x(r(g.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:b(()=>{var S;return[g.edit&&g.edit.deleted_at?(o(),j($e,{key:0,class:"mb-6",onRestore:ee},{default:b(()=>[x(r(e.$t("This record has been deleted.")),1)]),_:1})):p("",!0),t("div",qe,[t("div",Ue,[t("div",je,[c(k,{type:"date",modelValue:m(u).date,"onUpdate:modelValue":a[0]||(a[0]=s=>m(u).date=s),error:e.$page.props.errors.date,label:e.$t("Date")},null,8,["modelValue","error","label"]),c(k,{modelValue:m(u).reference,"onUpdate:modelValue":a[1]||(a[1]=s=>m(u).reference=s),error:e.$page.props.errors.reference,label:e.$t("Reference")},null,8,["modelValue","error","label"])]),t("div",Ae,[c(P,{id:"type",label:e.$t("Type"),modelValue:m(u).type,"onUpdate:modelValue":a[2]||(a[2]=s=>m(u).type=s),error:e.$page.props.errors.type,suggestions:[{value:"Damage",label:e.$t("Damage")},{value:"Addition",label:e.$t("Addition")},{value:"Subtraction",label:e.$t("Subtraction")}]},null,8,["label","modelValue","error","suggestions"]),!e.$super&&e.$user.warehouse_id?(o(),j(k,{key:0,disabled:"",readonly:"",label:e.$t("Warehouse"),modelValue:(S=g.warehouses.find(s=>s.id==e.$user.warehouse_id))==null?void 0:S.name},null,8,["label","modelValue"])):(o(),j(P,{key:1,id:"warehouse",label:e.$t("Warehouse"),suggestions:g.warehouses,modelValue:m(u).warehouse_id,"onUpdate:modelValue":a[3]||(a[3]=s=>m(u).warehouse_id=s),error:e.$page.props.errors.warehouse_id},null,8,["label","suggestions","modelValue","error"]))])]),t("div",Se,[c(P,{json:"","keep-focus":"","reset-search":"",id:"add-item","onUpdate:modelValue":Y,suggestions:e.route("items.search"),placeholder:e.$t("Scan barcode or search items"),defaultText:e.$t("Scan barcode or search items for next")},null,8,["suggestions","placeholder","defaultText"]),Q.value?(o(),l("div",Te,[m(u).items.length===0?(o(),l("div",{key:0,class:q({"-mx-4 md:-mx-6 -mb-4 p-4 bg-red-100 border-red-600":e.$page.props.errors.items})},[x(r(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),l("div",Ce,r(e.$page.props.errors.items),1)):p("",!0)],2)):(o(),l("div",De,[(o(!0),l(w,null,U(m(u).items,(s,n)=>(o(),l("div",{key:s.id,class:q(["-mx-4 -mb-6 p-4 md:-mx-6 border-b border-blue-100",{"bg-blue-50":n%2==0,"bg-indigo-50":n%2!=0,error:e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]}])},[t("h4",{class:q(["text-base font-bold",{"-mb-4":s.has_variants}])},r(s.name)+" ("+r(s.code)+")",3),s.has_variants&&s.variants.length&&s.selected.variations?(o(!0),l(w,{key:0},U(s.selected.variations,i=>(o(),l("div",{key:i.sku},[t("span",{class:"mt-8 block",innerHTML:e.$meta(i.meta)},null,8,ze),t("div",Fe,[t("div",Le,[c(k,{label:e.$t("Quantity"),type:"number",modelValue:i.quantity,"onUpdate:modelValue":_=>i.quantity=_,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),t("div",Me,[c(z,{label:e.$t("Unit"),modelValue:i.unit_id,"onUpdate:modelValue":_=>i.unit_id=_,class:"w-full"},{default:b(()=>[t("option",{value:s.unit.id},r(s.unit.name),9,Ie),s.unit.subunits&&s.unit.subunits.length?(o(!0),l(w,{key:0},U(s.unit.subunits,_=>(o(),l("option",{key:_.id,value:_.id},r(_.name),9,We))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),m(y).props.settings.track_weight==1&&s.track_weight==1?(o(),j(k,{key:0,type:"number",modelValue:i.weight,"onUpdate:modelValue":_=>i.weight=_,label:e.$t("Weight"),class:"mt-4 w-full sm:w-1/3"},null,8,["modelValue","onUpdate:modelValue","label"])):p("",!0)])]))),128)):(o(),l("div",Pe,[t("div",Be,[c(k,{label:e.$t("Quantity"),type:"number",modelValue:s.quantity,"onUpdate:modelValue":i=>s.quantity=i,class:"w-1/2"},null,8,["label","modelValue","onUpdate:modelValue"]),t("div",Re,[c(z,{label:e.$t("Unit"),modelValue:s.unit_id,"onUpdate:modelValue":i=>s.unit_id=i,class:"w-full"},{default:b(()=>[t("option",{value:s.unit.id},r(s.unit.name),9,Ee),s.unit.subunits&&s.unit.subunits.length?(o(!0),l(w,{key:0},U(s.unit.subunits,i=>(o(),l("option",{key:i.id,value:i.id},r(i.name),9,Ne))),128)):p("",!0)]),_:2},1032,["label","modelValue","onUpdate:modelValue"])])]),m(y).props.settings.track_weight==1&&s.track_weight==1?(o(),j(k,{key:0,type:"number",label:e.$t("Weight"),modelValue:s.weight,"onUpdate:modelValue":i=>s.weight=i,class:"mt-4 w-full sm:w-1/3"},null,8,["label","modelValue","onUpdate:modelValue"])):p("",!0)])),t("div",He,[e.$page.props.errors["items."+n+".variation_id"]?(o(),l("div",Oe,r(e.$page.props.errors["items."+n+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+n+".quantity"]?(o(),l("div",Qe,r(e.$page.props.errors["items."+n+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+n+".weight"]?(o(),l("div",Je,r(e.$page.props.errors["items."+n+".weight"].split("when").shift())+". ",1)):p("",!0)])],2))),128))]))])):(o(),l("div",Ye,[t("table",Ge,[t("thead",null,[t("tr",Ke,[t("th",Xe,[c(v,{name:"trash"})]),t("th",Ze,r(e.$t("Item")),1),t("th",{class:q(["px-2 lg:px-6 py-4 text-center",m(y).props.settings.track_weight?"w-32 xl:w-56":"w-px"])},[m(y).props.settings.track_weight?(o(),l("span",et,r(e.$t("Weight")),1)):p("",!0)],2),t("th",tt,r(e.$t("Quantity")),1),t("th",st,r(e.$t("Unit")),1)])]),m(u).items.length?(o(!0),l(w,{key:0},U(m(u).items,(s,n)=>(o(),l(w,{key:s.id},[s.selected&&s.selected.variations&&s.selected.variations.length?(o(),l("tbody",ot,[t("tr",{class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]}])},[a[8]||(a[8]=t("td",{class:"border-t"},[t("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),t("td",lt,[t("div",rt,[t("h4",at,[t("span",nt,r(s.name)+" ("+r(s.code)+")",1)])])])],2),(o(!0),l(w,null,U(s.selected.variations,(i,_)=>(o(),l("tr",{key:i.id,class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]}])},[t("td",null,[t("div",it,[t("button",{type:"button",onClick:$=>E(s,n,_),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[c(v,{name:"trash"})],8,dt)])]),t("td",null,[t("div",ut,[t("div",{innerHTML:e.$meta(i.meta)},null,8,pt)])]),t("td",null,[m(y).props.settings.track_weight==1&&s.track_weight==1?(o(),l("div",ct,[c(k,{type:"number",modelValue:i.weight,"onUpdate:modelValue":$=>i.weight=$,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),t("td",null,[t("div",mt,[c(k,{type:"number",modelValue:i.quantity,"onUpdate:modelValue":$=>i.quantity=$,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),t("td",null,[s.unit?(o(),l("div",ht,[c(z,{modelValue:i.unit_id,"onUpdate:modelValue":$=>i.unit_id=$,size:"small",class:"w-full block"},{default:b(()=>[t("option",{value:s.unit.id},r(s.unit.name),9,gt),s.unit.subunits&&s.unit.subunits.length?(o(!0),l(w,{key:0},U(s.unit.subunits,$=>(o(),l("option",{key:$.id,value:$.id},r($.name),9,ft))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2))),128)),e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]?(o(),l("tr",{key:0,class:q(["group-hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]}])},[a[9]||(a[9]=t("td",null,[t("div",{class:"px-2 lg:pl-6 pb-2 focus:text-indigo-500"})],-1)),t("td",yt,[t("div",vt,[e.$page.props.errors["items."+n+".variation_id"]?(o(),l("div",bt,r(e.$page.props.errors["items."+n+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+n+".quantity"]?(o(),l("div",wt,r(e.$page.props.errors["items."+n+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+n+".weight"]?(o(),l("div",_t,r(e.$page.props.errors["items."+n+".weight"].split("when").shift())+". ",1)):p("",!0)])])],2)):p("",!0)])):(o(),l("tbody",kt,[t("tr",{class:q(["hover:bg-gray-100 focus-within:bg-gray-100",{error:e.$page.props.errors["items."+n+".variation_id"]||e.$page.props.errors["items."+n+".quantity"]||e.$page.props.errors["items."+n+".weight"]}])},[t("td",$t,[t("div",Vt,[t("button",{type:"button",onClick:i=>E(s,n),class:"text-red-400 hover:text-red-600 w-5 h-5 flex items-center justify-center"},[c(v,{name:"trash"})],8,xt)])]),t("td",qt,[t("div",Ut,[t("h4",jt,[t("span",At,r(s.name)+" ("+r(s.code)+")",1)]),e.$page.props.errors["items."+n+".variation_id"]?(o(),l("div",St,r(e.$page.props.errors["items."+n+".variation_id"].split("when").shift())+". ",1)):p("",!0),e.$page.props.errors["items."+n+".quantity"]?(o(),l("div",Tt,r(e.$page.props.errors["items."+n+".quantity"]),1)):p("",!0),e.$page.props.errors["items."+n+".weight"]?(o(),l("div",Ct,r(e.$page.props.errors["items."+n+".weight"].split("when").shift())+". ",1)):p("",!0)])]),t("td",Dt,[m(y).props.settings.track_weight==1&&s.track_weight==1?(o(),l("div",zt,[c(k,{type:"number",modelValue:s.weight,"onUpdate:modelValue":i=>s.weight=i,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])):p("",!0)]),t("td",Ft,[t("div",Lt,[c(k,{type:"number",modelValue:s.quantity,"onUpdate:modelValue":i=>s.quantity=i,size:"small",class:"w-full block"},null,8,["modelValue","onUpdate:modelValue"])])]),t("td",Mt,[s.unit?(o(),l("div",It,[c(z,{modelValue:s.unit_id,"onUpdate:modelValue":i=>s.unit_id=i,size:"small",class:"w-full block"},{default:b(()=>[t("option",{value:s.unit.id},r(s.unit.name),9,Wt),s.unit.subunits&&s.unit.subunits.length?(o(!0),l(w,{key:0},U(s.unit.subunits,i=>(o(),l("option",{key:i.id,value:i.id},r(i.name),9,Pt))),128)):p("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"])])):p("",!0)])],2)]))],64))),128)):p("",!0),m(u).items.length===0?(o(),l("tbody",Bt,[t("tr",null,[t("td",{class:q(["border-t px-2 lg:px-6 py-4",{"bg-red-100 border-red-600":e.$page.props.errors.items}]),colspan:"5"},[x(r(e.$t("Add item to the list by search or scan barcode"))+" ",1),e.$page.props.errors.items?(o(),l("div",Rt,r(e.$page.props.errors.items),1)):p("",!0)],2)])])):p("",!0)])]))]),t("div",null,[t("label",Et,r(e.$t("Attachments")),1),g.edit&&g.edit.attachments&&g.edit.attachments.length?(o(),l("div",Nt,[t("ul",Ht,[(o(!0),l(w,null,U(g.edit.attachments,s=>(o(),l("li",{key:s.id,class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[t("div",Ot,[c(v,{name:"clip",class:"flex-shrink-0 h-5 w-5 text-gray-400"}),t("span",Qt,r(s.title),1)]),t("div",Jt,[t("a",{class:"font-medium text-indigo-600 hover:text-indigo-500",href:e.route("media.download",s.id)},r(e.$t("Download")),9,Yt),t("button",{class:"font-medium text-red-600 hover:text-red-500",onClick:n=>ae(s.id)},r(e.$t("Delete")),9,Gt)])]))),128))])])):p("",!0),t("div",{class:q([e.$page.props.errors.excel?"border-red-500":"border-gray-300","mt-1 flex justify-center px-6 py-3 border-2 border-dashed rounded-md"])},[t("div",Kt,[t("div",Xt,[t("label",Zt,[T.value.length?(o(),l("span",es,r(e.$t("Add more files")),1)):(o(),l("span",ts,r(e.$t("Select files")),1)),t("input",{multiple:"",ref_key:"file",ref:F,type:"file",class:"sr-only",id:"file-upload",name:"file-upload",onChange:G,accept:".png,.jpg,.jpeg,.pdf,.doc,.docx,.xls,.xlsx,.zip"},null,544)]),t("p",ss,r(e.$t("or drag and drop")),1)]),t("div",os,[t("div",null,r(e.$t("You can select .png, .jpg, .pdf, .docx, .xlsx & .zip files.")),1)]),T.value.length?(o(),l("div",ls,[t("div",rs,[x(r(e.$t("Selected Files"))+": ",1),(o(!0),l(w,null,U(T.value,(s,n)=>(o(),l("div",{class:"text-left",key:n},r(n+1)+". "+r(s),1))),128))])])):p("",!0),e.$page.props.errors.excel?(o(),l("div",as,r(e.$page.props.errors.files),1)):p("",!0)])],2)]),c(_e,{modelValue:m(u).details,"onUpdate:modelValue":a[4]||(a[4]=s=>m(u).details=s),error:e.$page.props.errors.details,label:e.$t("Details")},null,8,["modelValue","error","label"]),t("div",null,[!g.edit||g.edit.draft==1?(o(),j(ve,{key:0,id:"draft",class:"mb-2",checked:m(u).draft,"onUpdate:checked":a[5]||(a[5]=s=>m(u).draft=s),error:e.$page.props.errors.draft,label:e.$t("This record is draft")},null,8,["checked","error","label"])):p("",!0)])])]}),actions:b(()=>[t("div",ns,[g.edit?(o(),l(w,{key:0},[g.edit.deleted_at?(o(),l("button",{key:1,type:"button",onClick:oe,class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},r(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(o(),l("button",{key:0,type:"button",onClick:X,class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},r(e.$t("delete_x",{x:e.$t("Adjustment")})),1))],64)):(o(),l("div",is)),t("div",ds,[c(Ve,{on:m(u).recentlySuccessful,class:"mx-3"},{default:b(()=>[x(r(e.$t("Saved.")),1)]),_:1},8,["on"]),c(we,{type:"submit",loading:m(u).processing,disabled:m(u).processing},{default:b(()=>[x(r(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1}),A.value?(o(),j(he,{key:0,show:A.value,nf:D.value,onSelected:J,onClose:a[6]||(a[6]=S=>A.value=!1),variants:f.value.variants},null,8,["show","nf","variants"])):p("",!0),c(W,{"max-width":"md",show:M.value,"action-type":"delete",title:"Delete Adjustment?",close:re,"action-text":"Delete Permanently",action:le,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","content"]),c(W,{show:L.value,close:I,action:Z,"action-type":"delete",title:"Delete Adjustment?","action-text":"Delete Adjustment",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","content"]),c(W,{show:C.value,action:te,title:"Restore Adjustment!",close:se,"action-text":"Restore Adjustment",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","content"])]),_:1},8,["title"])}}};export{Ws as default};
