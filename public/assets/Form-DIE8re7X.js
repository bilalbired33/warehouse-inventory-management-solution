import{D as M}from"./Dialog-CBfXGxNq.js";import{T as D}from"./TextInput-CNd7BHfN.js";import{S as C}from"./SelectInput-Bl7BPvb9.js";import{A as P}from"./AdminLayout-CAkQ7Os4.js";import{L as R}from"./LoadingButton-DuL9lXrz.js";import{T as B}from"./DialogModal-DGhkFqan.js";import{T as A}from"./TrashedMessage-CoPSjYpa.js";import{T as L}from"./FormSection-DOK5FbWO.js";import{T as F}from"./DangerButton-BRiD1LeJ.js";import{T as N}from"./SectionTitle-B7yJArs8.js";import{T as x}from"./ActionMessage-Disc29dP.js";import{T as O}from"./SecondaryButton-DNoVYIkM.js";import{_ as I,r as f,d as _,e as a,o as s,g as d,a as u,c as m,h as c,t as n,F as p,b as h,i as j,T as E}from"./app-PFKfXWEI.js";import"./Label-C2KmBUfM.js";import"./Input-CjMYJgEv.js";import"./InputError-S5X7Xksv.js";import"./v4-C6aID195.js";import"./Modal-c7b3PsDt.js";import"./DropdownLink-C4dPXnWr.js";import"./ApplicationLogo-C_9BxMDe.js";import"./ApplicationMark-CKHzDXqr.js";const q={props:["edit","base_units"],components:{Dialog:M,TextInput:D,AdminLayout:P,SelectInput:C,LoadingButton:R,TecDialogModal:B,TecFormSection:L,TecDangerButton:F,TrashedMessage:A,TecSectionTitle:N,TecActionMessage:x,TecSecondaryButton:O},data(){return{confirm:!1,permanent:!1,restoreConf:!1,form:this.$inertia.form({_method:this.edit?"put":"post",code:this.edit?this.edit.code:null,name:this.edit?this.edit.name:null,operator:this.edit?this.edit.operator:null,base_unit_id:this.edit?this.edit.base_unit_id:null,operation_value:this.edit?parseFloat(this.edit.operation_value):null})}},computed:{formula(){let e=this.base_units.find(o=>o.id==this.form.base_unit_id);return e?e.name+" ("+e.code+") "+(this.form.operator||"")+" "+(this.form.operation_value||"")+" = "+(this.form.name?this.form.name:"")+(this.form.code?"("+this.form.code+")":""):null}},methods:{update(){this.form.post(this.edit?this.route("units.update",this.edit.id):this.route("units.store"),{preserveScroll:!0})},destroy(){this.confirm=!0},deleteUnit(){this.form.delete(route("units.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},closeModal(){this.confirm=!1},restore(){this.restoreConf=!0},restoreUnit(){this.$inertia.put(this.route("units.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.restoreConf=!1},deletePermanently(){this.permanent=!0},deleteRolePermanently(){this.form.delete(route("units.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.permanent=!1}}},z={class:"flex items-center"},G={class:"flex flex-col gap-6 w-full"},H={value:""},J=["value"],K={key:0,class:"flex flex-col gap-6 w-full"},Q={value:"*"},W={value:"/"},X={value:"+"},Y={value:"-"},Z={key:0,class:"px-4 py-3 bg-blue-100 rounded"},$={class:"w-full flex items-center justify-between"},ee={key:1},te={class:"flex items-center"};function oe(e,o,i,re,t,l){const T=f("Link"),w=f("trashed-message"),b=f("text-input"),g=f("select-input"),V=f("tec-action-message"),k=f("loading-button"),U=f("tec-form-section"),y=f("Dialog"),S=f("admin-layout");return s(),_(S,{title:e.$t(i.edit?"edit_x":"create_x",{x:e.$t("Unit")})},{default:a(()=>[d(U,{onSubmitted:l.update},{title:a(()=>[u("div",z,[i.edit?(s(),m(p,{key:0},[d(T,{class:"text-blue-600 hover:text-blue-700",href:e.route("units.index")},{default:a(()=>[c(n(e.$t("Units")),1)]),_:1},8,["href"]),o[7]||(o[7]=u("span",{class:"text-blue-600 font-medium mx-2"},"/",-1)),c(" "+n(i.edit.name),1)],64)):(s(),m(p,{key:1},[c(n(e.$t("create_x",{x:e.$t("Unit")})),1)],64))])]),description:a(()=>[c(n(i.edit?e.$t("Update the record by modifying the details in the form below"):e.$t("Please fill the form below to add new record.")),1)]),form:a(()=>[i.edit&&i.edit.deleted_at?(s(),_(w,{key:0,class:"mb-6",onRestore:l.restore},{default:a(()=>[c(n(e.$t("This record has been deleted.")),1)]),_:1},8,["onRestore"])):h("",!0),u("div",G,[d(b,{modelValue:t.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>t.form.name=r),error:e.$page.props.errors.name,label:e.$t("Name")},null,8,["modelValue","error","label"]),d(b,{modelValue:t.form.code,"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.code=r),error:e.$page.props.errors.code,label:e.$t("Code")},null,8,["modelValue","error","label"]),i.base_units&&i.base_units.length>1?(s(),_(g,{key:0,label:e.$t("Base Unit"),modelValue:t.form.base_unit_id,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.base_unit_id=r),error:e.$page.props.errors.base_unit_id},{default:a(()=>[u("option",H,n(e.$t("Select")),1),(s(!0),m(p,null,j(i.base_units,r=>{var v;return s(),m(p,{key:r.id},[r.id!=((v=i.edit)==null?void 0:v.id)?(s(),m("option",{key:0,value:r.id},n(r.name),9,J)):h("",!0)],64)}),128))]),_:1},8,["label","modelValue","error"])):h("",!0),d(E,{name:"slidedown"},{default:a(()=>[t.form.base_unit_id?(s(),m("div",K,[d(g,{label:e.$t("Operator"),modelValue:t.form.operator,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.operator=r),error:e.$page.props.errors.operator},{default:a(()=>[u("option",Q,n(e.$t("Multiply")),1),u("option",W,n(e.$t("Divide")),1),u("option",X,n(e.$t("Plus")),1),u("option",Y,n(e.$t("Minus")),1)]),_:1},8,["label","modelValue","error"]),d(b,{type:"number",modelValue:t.form.operation_value,"onUpdate:modelValue":o[4]||(o[4]=r=>t.form.operation_value=r),label:e.$t("Operation Value"),error:e.$page.props.errors.operation_value},null,8,["modelValue","label","error"]),t.form.operator&&t.form.operation_value?(s(),m("div",Z,n(l.formula),1)):h("",!0)])):h("",!0)]),_:1})])]),actions:a(()=>[u("div",$,[i.edit?(s(),m(p,{key:0},[i.edit.deleted_at?(s(),m("button",{key:1,type:"button",onClick:o[6]||(o[6]=(...r)=>l.deletePermanently&&l.deletePermanently(...r)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},n(e.$t("delete_x",{x:e.$t("Permanently")})),1)):(s(),m("button",{key:0,type:"button",onClick:o[5]||(o[5]=(...r)=>l.destroy&&l.destroy(...r)),class:"text-red-600 px-4 py-2 rounded border-2 border-transparent hover:border-gray-300 focus:outline-none focus:border-gray-300"},n(e.$t("delete_x",{x:e.$t("Unit")})),1))],64)):(s(),m("div",ee)),u("div",te,[d(V,{on:t.form.recentlySuccessful,class:"mr-3"},{default:a(()=>[c(n(e.$t("Saved.")),1)]),_:1},8,["on"]),d(k,{type:"submit",loading:t.form.processing,disabled:t.form.processing},{default:a(()=>[c(n(e.$t("Save")),1)]),_:1},8,["loading","disabled"])])])]),_:1},8,["onSubmitted"]),d(y,{"max-width":"md",show:t.permanent,"action-type":"delete",title:"Delete Role?",close:l.closePermanentModal,action:l.deleteRolePermanently,"action-text":"Delete Permanently",content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),d(y,{show:t.confirm,close:l.closeModal,action:l.deleteUnit,"action-type":"delete",title:"Delete Unit?","action-text":"Delete Unit",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),d(y,{show:t.restoreConf,action:l.restoreUnit,title:"Restore Unit!",close:l.closeRestoreModal,"action-text":"Restore Unit",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"])]),_:1},8,["title"])}const Ue=I(q,[["render",oe]]);export{Ue as default};
