import{S as R,p as q,m as F}from"./SearchFilter-J3sf2wIY.js";import{t as N}from"./throttle-DnWO0zlu.js";import O from"./Details-BDBAOWNM.js";import{D as L}from"./Dialog-CBfXGxNq.js";import{M as U}from"./Modal-c7b3PsDt.js";import{T as W}from"./Button-CYWIMkWL.js";import{P as Q}from"./Pagination-CTc1ABRF.js";import{S as E}from"./SelectInput-Bl7BPvb9.js";import{T as K,a as G}from"./DropdownLink-C4dPXnWr.js";import{A as H}from"./AdminLayout-CAkQ7Os4.js";import{A as J}from"./AutoComplete-D56ZVB9O.js";import{T as X}from"./SectionTitle-B7yJArs8.js";import{_ as Y,r as u,d as _,e as h,o as n,a as t,g as l,h as f,t as o,b as a,c as d,i as j,n as b,F as w}from"./app-PFKfXWEI.js";import"./_baseIsEqual-DTBiz6Tr.js";import"./JsBarcode-FqNbiSNK.js";import"./LoadingButton-DuL9lXrz.js";import"./DialogModal-DGhkFqan.js";import"./DangerButton-BRiD1LeJ.js";import"./SecondaryButton-DNoVYIkM.js";import"./Label-C2KmBUfM.js";import"./InputError-S5X7Xksv.js";import"./v4-C6aID195.js";import"./ApplicationLogo-C_9BxMDe.js";import"./ApplicationMark-CKHzDXqr.js";const Z={components:{Modal:U,Dialog:L,TecButton:W,Pagination:Q,ItemDetails:O,AdminLayout:H,TecDropdown:K,SelectInput:E,AutoComplete:J,SearchFilter:R,TecDropdownLink:G,TecSectionTitle:X},props:{items:Object,filters:Object,warehouses:Array},data(){return{edit:null,item:null,close:!1,confirm:!1,details:!1,loading:!1,permanent:!1,restoreConf:!1,warehouse_id:!1,form:{search:this.filters.search,trashed:this.filters.trashed}}},watch:{form:{handler:N(function(){let e=q(this.form);this.$inertia.visit(this.route("items.index",Object.keys(e).length?e:{remember:"forget"}),{onFinish:()=>{document.getElementById("page-search").focus()}})},150),deep:!0}},methods:{goto(e){this.item&&this.item.id==e.id?this.details=!0:(this.loading=!0,axios.get(route("items.show",e.id)+"?json=yes").then(m=>{this.item=m.data,this.details=!0,this.loading=!1}))},reset(){this.form=F(this.form,()=>null)},destroy(e){this.edit=e,this.confirm=!0},deleteItem(){this.$inertia.delete(route("items.destroy",this.edit.id),{onSuccess:()=>this.closeModal()})},showDetails(){this.details=!1},hideDetails(){this.details=!1},closeModal(){this.edit=null,this.confirm=!1},restore(e){this.edit=e,this.restoreConf=!0},restoreItem(){this.$inertia.put(this.route("items.restore",this.edit.id),{onSuccess:()=>this.restoreConf=!1})},closeRestoreModal(){this.edit=null,this.restoreConf=!1},deletePermanently(e){this.edit=e,this.permanent=!0},deleteCategoryPermanently(){this.$inertia.delete(route("items.destroy.permanently",this.edit.id),{onSuccess:()=>this.closeModal()})},closePermanentModal(){this.edit=null,this.permanent=!1}}},ee={class:"px-4 md:px-0"},te={class:"mb-6 flex flex-col-reverse lg:flex-row px-4 lg:px-0 gap-4 justify-between items-center print:hidden"},se={class:"flex items-center justify-center"},oe={class:"mr-4 flex items-center -mb-1 w-44"},ne={class:"flex items-center px-4 py-3 bg-gray-800 rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},ie=["href"],re={id:"dd-table",class:"bg-white -mx-4 md:mx-0 md:rounded-md shadow overflow-y-visible overflow-x-auto"},le={class:"w-full overflow-y-visible"},ae={class:"text-left font-bold"},de={class:"px-6 pt-6 pb-4"},ce={class:"px-6 pt-6 pb-4"},ue={class:"px-6 pt-6 pb-4"},me={class:"px-6 pt-6 pb-4"},he={class:"px-6 pt-6 pb-4",colspan:"2"},fe=["onClick"],pe={class:"px-6 py-4 max-w-md flex items-center focus:text-indigo-500"},_e=["src"],ge={class:"font-bold"},ye={key:0,class:"text-gray-600"},be={class:"flex items-center"},we={class:"text-gray-600 mr-1"},ke={class:"uppercase"},ve=["onClick"],xe={class:"px-6 py-4 w-48"},Ce={class:"flex items-center"},$e={class:"text-gray-600 mr-1"},Ie={class:"flex items-center"},De={class:"text-gray-600 mr-1"},je={key:0,class:"flex items-center"},Te={class:"text-gray-600 mr-1"},Ve=["onClick"],ze={class:"px-6 py-4 w-48"},Se={key:0,class:"flex items-center flex-wrap"},Me={class:"text-gray-600 mr-1"},Pe={key:0,class:"ml-1"},Ae=["onClick"],Be={class:"px-6 py-4 w-48"},Re={key:0},qe={class:"text-gray-600"},Fe=["onClick"],Ne={key:0,class:"px-6 py-4 w-56 whitespace-nowrap"},Oe={class:"w-full flex flex-col items-center justify-between text-right"},Le={class:"w-full flex items-center justify-between"},Ue={class:"text-gray-600"},We={class:"font-bold"},Qe={key:0,class:"w-full flex items-center justify-between"},Ee={class:"text-gray-600"},Ke={class:"font-bold"},Ge={key:1,class:"px-6 py-4 w-56 whitespace-nowrap"},He={class:"w-full flex flex-col items-center justify-between text-right"},Je={class:"w-full flex items-center justify-between"},Xe={class:"text-gray-600"},Ye={class:"font-bold"},Ze={key:0,class:"w-full flex items-center justify-between"},et={class:"text-gray-600"},tt={class:"font-bold"},st={class:"border-t w-16"},ot={class:"px-4 flex items-center print:hidden"},nt={key:0,class:"flex items-center"},it=["onClick"],rt=["onClick"],lt=["onClick"],at={key:0},dt={class:"border-t px-6 py-4",colspan:"5"},ct={class:"rounded-md overflow-hidden"},ut={class:"px-6 py-4 bg-white border-b flex items-center justify-between print:hidden"},mt={class:"text-lg"},ht={key:0},ft={class:"p-6 print:block print:h-full bg-gray-100"};function pt(e,m,g,_t,i,c){const T=u("tec-section-title"),x=u("auto-complete"),V=u("search-filter"),p=u("icons"),C=u("tec-dropdown-link"),z=u("tec-dropdown"),$=u("boolean"),k=u("Link"),S=u("pagination"),M=u("Item-details"),P=u("modal"),v=u("Dialog"),A=u("loading"),B=u("admin-layout");return n(),_(B,{title:e.$t("Items")},{default:h(()=>[t("div",ee,[l(T,{class:"-mx-4 md:mx-0 mb-6"},{title:h(()=>[f(o(e.$t("Items")),1)]),description:h(()=>[f(o(e.$t("Please review the data in the table below")),1)]),_:1}),t("div",te,[l(V,{modelValue:i.form.search,"onUpdate:modelValue":m[1]||(m[1]=s=>i.form.search=s),class:"w-full max-w-md",close:i.close,onReset:c.reset},{default:h(()=>[l(x,{id:"trashed",position:"left",label:e.$t("Trashed"),modelValue:i.form.trashed,"onUpdate:modelValue":m[0]||(m[0]=s=>i.form.trashed=s),class:"mt-1 w-full",suggestions:[{label:e.$t("Not Trashed"),value:null},{label:e.$t("With Trashed"),value:"with"},{label:e.$t("Only Trashed"),value:"only"}]},null,8,["label","modelValue","suggestions"])]),_:1},8,["modelValue","close","onReset"]),t("div",se,[t("div",oe,[l(x,{id:"warehouse",label:"",placeholder:e.$t("Warehouse"),suggestions:g.warehouses,modelValue:i.warehouse_id,"onUpdate:modelValue":m[2]||(m[2]=s=>i.warehouse_id=s)},null,8,["placeholder","suggestions","modelValue"])]),e.$can(["create-items","import-items","export-items"])?(n(),_(z,{key:0,align:"right",width:"48"},{trigger:h(()=>[t("button",ne,[l(p,{name:"menu"})])]),content:h(()=>[e.$can("create-items")?(n(),_(C,{key:0,href:e.route("items.create")},{default:h(()=>[f(o(e.$t("create_x",{x:e.$t("Item")})),1)]),_:1},8,["href"])):a("",!0),e.$can("export-items")?(n(),d("a",{key:1,href:e.route("items.export",{search:i.form.search}),class:"block px-4 py-2 leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out"},o(e.$t("export_x",{x:e.$t("Items")})),9,ie)):a("",!0),e.$can("import-items")?(n(),_(C,{key:2,href:e.route("items.import")},{default:h(()=>[f(o(e.$t("import_x",{x:e.$t("Items")})),1)]),_:1},8,["href"])):a("",!0)]),_:1})):a("",!0)])]),t("div",re,[t("table",le,[t("thead",null,[t("tr",ae,[t("th",de,o(e.$t("Name")),1),t("th",ce,o(e.$t("Options")),1),t("th",ue,o(e.$t("Variants")),1),t("th",me,o(e.$t("Relations")),1),t("th",he,o(e.$t("Stock"))+" "+o(i.warehouse_id?" ("+g.warehouses.find(s=>s.id==i.warehouse_id).code+")":""),1)])]),t("tbody",null,[(n(!0),d(w,null,j(g.items.data,s=>{var I,D;return n(),d("tr",{key:s.id,class:"hover:bg-gray-100 focus-within:bg-gray-100"},[t("td",{class:b(["border-t",{"cursor-pointer":e.$can("read-items")}]),onClick:r=>c.goto(s)},[t("div",pe,[s.photo?(n(),d("img",{key:0,class:"block w-16 h-16 rounded-sm mr-2 -my-2",src:s.photo},null,8,_e)):a("",!0),t("div",null,[t("div",ge,o(s.name),1),t("div",null,[f(o(e.$t("Code"))+": ",1),t("strong",null,o(s.code),1)]),s.sku?(n(),d("div",ye,o(e.$t("SKU"))+": "+o(s.sku),1)):a("",!0),t("div",be,[t("span",we,o(e.$t("Symbology"))+":",1),m[4]||(m[4]=f()),t("span",ke,o(s.symbology),1)])]),s.deleted_at?(n(),_(p,{key:1,name:"trash",class:"shrink-0 w-4 h-4 text-red-500 ml-2"})):a("",!0)])],10,fe),t("td",{class:b(["border-t",{"cursor-pointer":e.$can("read-items")}]),onClick:r=>c.goto(s)},[t("div",xe,[t("div",Ce,[t("span",$e,o(e.$t("Track Weight")),1),l($,{value:s.track_weight,class:"w-3 h-3 ml-1"},null,8,["value"])]),t("div",Ie,[t("span",De,o(e.$t("Track Quantity")),1),l($,{value:s.track_quantity,class:"w-3 h-3 ml-2"},null,8,["value"])]),s.track_quantity==1?(n(),d("div",je,[t("span",Te,o(e.$t("Alert on"))+":",1),t("span",null,o(e.$number(s.alert_quantity||0)),1)])):a("",!0)])],10,ve),t("td",{class:b(["border-t",{"cursor-pointer":e.$can("read-items")}]),onClick:r=>c.goto(s)},[t("div",ze,[s.has_variants==1?(n(),d("div",Se,[t("span",Me,o(e.$t("Variants"))+":",1),(n(!0),d(w,null,j(s.variants,r=>(n(),d(w,{key:r.name},[r.name?(n(),d("div",Pe,[t("strong",null,o(r.name)+":",1),f(" "+o(r.option.filter(y=>y).join(", ")),1)])):a("",!0)],64))),128))])):a("",!0)])],10,Ve),t("td",{class:b(["border-t",{"cursor-pointer":e.$can("read-items")}]),onClick:r=>c.goto(s)},[t("div",Be,[f(o(s.categories.map(r=>r.name).join(", "))+" ",1),s.unit?(n(),d("div",Re,[t("span",qe,o(e.$t("Unit"))+":",1),f(" "+o(s.unit.name),1)])):a("",!0)])],10,Ae),t("td",{class:b(["border-t",{"cursor-pointer":e.$can("read-items")}]),onClick:r=>c.goto(s)},[i.warehouse_id?(n(),d("div",Ne,[t("div",Oe,[t("div",Le,[t("span",Ue,o(e.$t("Quantity"))+":",1),t("span",We,o(e.$number((I=s.stock.find(r=>r.warehouse_id==i.warehouse_id))==null?void 0:I.quantity)),1)]),s.track_weight==1?(n(),d("div",Qe,[t("span",Ee,o(e.$t("Weight"))+":",1),t("span",Ke,o(e.$number((D=s.stock.find(r=>r.warehouse_id==i.warehouse_id))==null?void 0:D.weight)),1)])):a("",!0)])])):(n(),d("div",Ge,[t("div",He,[t("div",Je,[t("span",Xe,o(e.$t("Quantity"))+":",1),t("span",Ye,o(e.$number(s.stock.reduce((r,y)=>r+parseFloat(y.quantity),0))),1)]),s.track_weight==1?(n(),d("div",Ze,[t("span",et,o(e.$t("Weight"))+":",1),t("span",tt,o(e.$number(s.stock.reduce((r,y)=>r+parseFloat(y.weight),0))),1)])):a("",!0)])]))],10,Fe),t("td",st,[t("div",ot,[e.$can(["create-items","import-items","export-items"])?(n(),d("div",nt,[e.$can("trail-items")?(n(),_(k,{key:0,href:e.route("items.trail",s.id),class:"flex items-center p-3 md:p-2 bg-blue-600 rounded-l-md text-white hover:bg-blue-700 focus:bg-blue-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},{default:h(()=>[l(p,{name:"list"})]),_:2},1032,["href"])):a("",!0),l(k,{href:e.route("items.show",s.id),class:"flex items-center p-3 md:p-2 bg-blue-600 text-white hover:bg-blue-700 focus:bg-blue-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},{default:h(()=>[l(p,{name:"doc"})]),_:2},1032,["href"]),e.$can("update-items")?(n(),_(k,{key:1,href:e.route("items.edit",s.id),class:"flex items-center p-3 md:p-2 bg-yellow-600 text-white hover:bg-yellow-700 focus:bg-yellow-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},{default:h(()=>[l(p,{name:"edit"})]),_:2},1032,["href"])):a("",!0),s.deleted_at?(n(),d(w,{key:2},[t("button",{type:"button",onClick:r=>c.restore(s),class:"flex items-center p-3 md:p-2 bg-blue-600 text-white hover:bg-blue-700 focus:bg-blue-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},[l(p,{name:"refresh"})],8,it),t("button",{type:"button",onClick:r=>c.deletePermanently(s),class:"flex items-center p-3 md:p-2 bg-red-600 rounded-r-md text-white hover:bg-red-700 focus:bg-red-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},[l(p,{name:"trash"})],8,rt)],64)):(n(),d("button",{key:3,type:"button",onClick:r=>c.destroy(s),class:"flex items-center p-3 md:p-2 bg-red-600 rounded-r-md text-white hover:bg-red-700 focus:bg-red-700 z-0 focus:z-10 focus:outline-none focus:ring focus:ring-gray-300 transition ease-in-out duration-150"},[l(p,{name:"trash"})],8,lt))])):a("",!0)])])])}),128)),g.items.data.length===0?(n(),d("tr",at,[t("td",dt,o(e.$t("There is no data to display.")),1)])):a("",!0)])])]),l(S,{class:"mt-6",meta:g.items.meta,links:g.items.links},null,8,["meta","links"])]),l(P,{show:i.details,"max-width":"4xl",closeable:!0,onClose:c.hideDetails},{default:h(()=>[t("div",ct,[t("div",ut,[t("div",mt,[f(o(e.$t("Item Details"))+" ",1),i.details&&i.item?(n(),d("span",ht,"("+o(i.item.name)+")",1)):a("",!0)]),t("button",{onClick:m[3]||(m[3]=s=>c.hideDetails()),class:"flex items-center justify-center -mr-2 h-8 w-8 rounded-full text-gray-600 hover:text-gray-800 hover:bg-gray-300 focus:outline-none"},[l(p,{name:"cross",class:"h-5 w-5"})])]),t("div",ft,[i.item?(n(),_(M,{key:0,item:i.item,modal:!0},null,8,["item"])):a("",!0)])])]),_:1},8,["show","onClose"]),l(v,{"max-width":"md",show:i.permanent,"action-type":"delete",title:"Delete Item?",close:c.closePermanentModal,"action-text":"Delete Permanently",action:c.deleteCategoryPermanently,content:`<p class='mb-2'>${e.$t("Are you sure you want to delete the record permanently?")}</p>
        <p>${e.$t("Once deleted, all of its resources and data will be permanently deleted.")}</p>`},null,8,["show","close","action","content"]),l(v,{show:i.confirm,close:c.closeModal,action:c.deleteItem,"action-type":"delete",title:"Delete Item?","action-text":"Delete Item",content:e.$t("Are you sure you want to delete the record?")},null,8,["show","close","action","content"]),l(v,{show:i.restoreConf,action:c.restoreItem,title:"Restore Item!",close:c.closeRestoreModal,"action-text":"Restore Item",content:e.$t("Are you sure you want to restore the record?")},null,8,["show","action","close","content"]),i.loading?(n(),_(A,{key:0})):a("",!0)]),_:1},8,["title"])}const Ot=Y(Z,[["render",pt]]);export{Ot as default};
